{"ast":null,"code":"var _jsxFileName = \"/home/kevin/Downloads/ESW/esw-repo/frontend/src/components/Common/cute.js\";\nimport React, { Component, auto, useState } from 'react'; // import { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\"; // import Button from '@mui/material/Button';\n\nimport { Paper, TextField } from '@mui/material';\nimport axios from 'axios';\nimport { LineChart, Line, CartesianGrid, XAxis, YAxis } from 'recharts'; // const data = [{ name: 'kveinop', uv: 400 }, { name: '13-2-21', uv: 200 }, { name: '14-2-21', uv: 500 }, { name: '12-2-21', uv: 600 }, { name: '12-2-21', uv: 200 },];\n// let data = [];\n\nconst styles = {\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  textAlign: \"center\",\n  verticalAlign: \"middle\" // boxShadow: \"4px 4px 4px rgba(0, 0, 0, 0.25)\",\n  // borderRadius: \"25px\",\n\n};\nconst lmao = [{\n  name: '1-12-2021',\n  uv: 54\n}, {\n  name: '2-12-21',\n  uv: 76\n}, {\n  name: '3-12-21',\n  uv: 33\n}, {\n  name: '4-12-21',\n  uv: 56\n}, {\n  name: '5-12-21',\n  uv: 29\n}];\nconst headerStyles = {\n  height: auto,\n  width: auto,\n  //   textAlign: 'center',\n  rounded: true,\n  paddingTop: auto,\n  //   backgroundColor: '#76D8E3',\n  opacity: 0.8,\n  margin: 10,\n  fontSize: 20\n}; // const [dataop, setdataop] = useState([]);\n\nfunction hash(s, M) {\n  let sum = 0,\n      mul = 1;\n\n  for (let i = 0; i < s.length; i++) {\n    mul = i % 4 == 0 ? 1 : mul * 256;\n    sum += s.charCodeAt(i) * mul;\n  } // console.log(sum);\n\n\n  return Math.abs(sum) % M;\n}\n\nexport default class Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleTextFieldChange = event => {\n      //  console.log(\"sort button\", this.state.sortValue)\n      // console.log(eve)\n      this.setState({\n        textFieldValue: event.target.value\n      });\n    };\n\n    this.handleSortJobs = event => {\n      //  console.log(\"sort button\", this.state.sortValue)\n      this.setState({\n        duration: event.target.value\n      });\n    };\n\n    this.state = {\n      textFieldValue: '1',\n      duration: '1'\n    }; // this.data = [];\n  }\n\n  componentDidUpdate() {\n    function gettim(ts) {\n      var y = parseInt(ts[0] + ts[1] + ts[2] + ts[3]);\n      var m = parseInt(ts[4] + ts[5]);\n      var d = parseInt(ts[6] + ts[7]);\n      var h = parseInt(ts[9] + ts[10]);\n      var min = parseInt(ts[11] + ts[12]);\n      let ret = String(d) + \"/\" + String(m) + \"/\" + String(y) + \" \" + String(h) + \":\" + String(min);\n      return ret;\n    }\n\n    function interval(months, days, hours) {\n      var interva = months * 30 * 24 * 60 + days * 24 * 60 + hours * 60;\n      return interva;\n    }\n\n    function calc() {\n      var today = new Date();\n      var dd = today.getDate();\n      var mm = today.getMonth() + 1; //January is 0!\n\n      var yyyy = today.getFullYear();\n      var hh = today.getHours();\n      var curr_time = yyyy * 12 * 30 * 24 * 60 + mm * 30 * 24 * 60 + dd * 24 * 60 + hh * 60;\n      return curr_time;\n    }\n\n    function check(curr_time, ts, months, days, hours) {\n      var interval = months * 30 * 24 * 60 + days * 24 * 60 + hours * 60;\n      var y = parseInt(ts[0] + ts[1] + ts[2] + ts[3]);\n      var m = parseInt(ts[4] + ts[5]);\n      var d = parseInt(ts[6] + ts[7]);\n      var h = parseInt(ts[9] + ts[10]);\n      var min = parseInt(ts[11] + ts[12]);\n      var lt = y * 12 * 30 * 24 * 60 + m * 30 * 24 * 60 + d * 24 * 60 + h * 60 + min;\n\n      if (curr_time - lt > interval) {\n        return 0;\n      } else {\n        return 1;\n      }\n    }\n\n    function filter_data(sum, ts, months, days, hours) {\n      var total_minutes = months * 30 * 24 * 60 + days * 24 * 60 + hours * 60;\n      var today = new Date();\n      var dd = today.getDate();\n      var mm = today.getMonth() + 1; //January is 0!\n\n      var yyyy = today.getFullYear();\n      var hh = today.getHours();\n      var y = parseInt(ts[0] + ts[1] + ts[2] + ts[3]);\n      var m = parseInt(ts[4] + ts[5]);\n      var d = parseInt(ts[6] + ts[7]);\n      var h = parseInt(ts[9] + ts[10]);\n      var min = parseInt(ts[11] + ts[12]);\n      yyyy -= y;\n      mm -= m;\n      dd -= d;\n      hh -= h;\n      var minutes_passed = yyyy * 12 * 30 * 24 * 60 + mm * 30 * 24 * 60 + dd * 24 * 60 + hh * 60; // console.log(total_minutes,minutes_passed)\n\n      if (minutes_passed < total_minutes) {\n        let ret = String(d) + \"/\" + String(m) + \"/\" + String(y) + \" \" + String(h) + \":\" + String(min);\n        return ret;\n      } else {\n        return \"-1\";\n      }\n    }\n\n    axios.get('http://localhost:4000/testy', {}).then(res => {\n      let data2 = [];\n      let array = res.data[\"m2m:cnt\"][\"m2m:cin\"];\n      console.log(\"this\", array);\n      let sum = 0;\n      let curr_time = calc();\n      let grapharray = [];\n      let velocity_of_water = 5; //litres per minute\n\n      let interva = 1; // minutes\n\n      for (let i = array.length - 1; i > 0; i--) {\n        let data = array[i].con;\n        data = data.split(';');\n        let hboi = hash(data[0] + data[1], 23);\n        let lvl = 0;\n        lvl = parseInt(Number(\"0x\" + data[0]), 10);\n        let ts = array[i].ct;\n        let timev;\n\n        if (this.state.duration == \"1\") {\n          let flag = check(curr_time, ts, parseInt(this.state.textFieldValue), 0, 0);\n\n          if (flag == 0) {\n            let timec = gettim(ts);\n            grapharray.push({\n              name: sum,\n              uv: timec\n            }); // push the time also \n\n            sum = 0;\n            curr_time -= interval(parseInt(this.state.textFieldValue), 0, 0);\n          }\n\n          let status_i = 0; // off\n\n          let status_i_minus_1 = 1; // on\n\n          if (status_i & status_i_minus_1) {\n            sum += velocity_of_water * interva;\n          } else if (status_i ^ status_i_minus_1) {\n            sum += velocity_of_water * interva / 2;\n          }\n        } else if (this.state.duration == \"2\") {\n          let flag = check(curr_time, ts, 0, parseInt(this.state.textFieldValue), 0);\n\n          if (flag == 0) {\n            let timec = gettim(ts);\n            grapharray.push({\n              name: sum,\n              uv: timec\n            }); // push the time also \n\n            sum = 0;\n            curr_time -= interval(0, parseInt(this.state.textFieldValue), 0);\n          }\n\n          let status_i = 0; // off\n\n          let status_i_minus_1 = 1; // on\n\n          if (status_i & status_i_minus_1) {\n            sum += velocity_of_water * interva;\n          } else if (status_i ^ status_i_minus_1) {\n            sum += velocity_of_water * interva / 2;\n          }\n        } else {\n          let flag = check(curr_time, ts, 0, 0, parseInt(this.state.textFieldValue));\n\n          if (flag == 0) {\n            let timec = gettim(ts);\n            grapharray.push({\n              name: sum,\n              uv: timec\n            }); // push the time also \n\n            sum = 0;\n            curr_time -= interval(0, 0, parseInt(this.state.textFieldValue));\n          }\n\n          let status_i = 0; // off\n\n          let status_i_minus_1 = 1; // on\n\n          if (status_i & status_i_minus_1) {\n            sum += velocity_of_water * interva;\n          } else if (status_i ^ status_i_minus_1) {\n            sum += velocity_of_water * interva / 2;\n          }\n        }\n      }\n\n      this.data = data2;\n      this.setState({\n        data: data2\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.setState({\n      textFieldValue: \"\"\n    });\n  }\n\n  render() {\n    // console.log(this.state.duration, this.state.textFieldValue)\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      style: headerStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \"Water Comsumption over selected time intervals\"), React.createElement(Paper, {\n      style: styles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      name: \"sortValue\",\n      onChange: this.handleSortJobs,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, \"Days\"), React.createElement(\"option\", {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"Months\"), React.createElement(\"option\", {\n      value: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"Hours\"))), React.createElement(Paper, {\n      style: styles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      margin: \"dense\",\n      label: \"1\",\n      size: \"small\",\n      value: this.state.textFieldValue,\n      onChange: this.handleTextFieldChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    })), React.createElement(Paper, {\n      style: styles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(LineChart, {\n      width: 600,\n      height: 300,\n      data: lmao,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(Line, {\n      type: \"monotone\",\n      dataKey: \"uv\",\n      stroke: \"#8884d8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }), React.createElement(CartesianGrid, {\n      stroke: \"#ccc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }), React.createElement(XAxis, {\n      dataKey: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }), React.createElement(YAxis, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/home/kevin/Downloads/ESW/esw-repo/frontend/src/components/Common/cute.js"],"names":["React","Component","auto","useState","Paper","TextField","axios","LineChart","Line","CartesianGrid","XAxis","YAxis","styles","display","justifyContent","alignItems","textAlign","verticalAlign","lmao","name","uv","headerStyles","height","width","rounded","paddingTop","opacity","margin","fontSize","hash","s","M","sum","mul","i","length","charCodeAt","Math","abs","Home","constructor","props","handleTextFieldChange","event","setState","textFieldValue","target","value","handleSortJobs","duration","state","componentDidUpdate","gettim","ts","y","parseInt","m","d","h","min","ret","String","interval","months","days","hours","interva","calc","today","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","hh","getHours","curr_time","check","lt","filter_data","total_minutes","minutes_passed","get","then","res","data2","array","data","console","log","grapharray","velocity_of_water","con","split","hboi","lvl","Number","ct","timev","flag","timec","push","status_i","status_i_minus_1","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component, auto, useState } from 'react';\n// import { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\"\n// import Button from '@mui/material/Button';\nimport {Paper, TextField} from '@mui/material';\nimport axios from 'axios';\nimport { LineChart, Line, CartesianGrid, XAxis, YAxis } from 'recharts';\n// const data = [{ name: 'kveinop', uv: 400 }, { name: '13-2-21', uv: 200 }, { name: '14-2-21', uv: 500 }, { name: '12-2-21', uv: 600 }, { name: '12-2-21', uv: 200 },];\n// let data = [];\nconst styles = {\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  textAlign: \"center\",\n  verticalAlign: \"middle\",\n  // boxShadow: \"4px 4px 4px rgba(0, 0, 0, 0.25)\",\n  // borderRadius: \"25px\",\n};\n\nconst lmao = [{ name: '1-12-2021', uv: 54 }, { name: '2-12-21', uv: 76 }, { name: '3-12-21', uv: 33 }, { name: '4-12-21', uv: 56 }, { name: '5-12-21', uv: 29 },];\n\nconst headerStyles = {\n  height: auto,\n  width: auto,\n  //   textAlign: 'center',\n  rounded: true,\n  paddingTop: auto,\n  //   backgroundColor: '#76D8E3',\n  opacity: 0.8,\n  margin: 10,\n  fontSize: 20\n};\n\n// const [dataop, setdataop] = useState([]);\n\nfunction hash(s, M) {\n  let sum = 0, mul = 1;\n  for (let i = 0; i < s.length; i++) {\n    mul = (i % 4 == 0) ? 1 : mul * 256;\n    sum += s.charCodeAt(i) * mul;\n  }\n  // console.log(sum);\n  return (Math.abs(sum) % M);\n}\n\n\nexport default class Home extends Component {\n\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      textFieldValue: '1',\n      duration: '1'\n    }\n    // this.data = [];\n  }\n\n\n  componentDidUpdate() {\n    function gettim(ts)\n    {\n      var y = parseInt(ts[0] + ts[1] + ts[2] + ts[3]);\n      var m = parseInt(ts[4] + ts[5]);\n      var d = parseInt(ts[6] + ts[7]);\n      var h= parseInt(ts[9] + ts[10]);\n      var min = parseInt(ts[11]+ ts[12]);\n\n      let ret = String(d) + \"/\" + String(m) + \"/\" + String(y) + \" \" + String(h) + \":\" +String(min);\n      return ret;\n\n    }\n    function interval(months,days,hours)\n    {\n      var interva = months*30*24*60 + days*24*60 + hours*60;\n      return interva;\n    }\n    function calc() {\n      var today = new Date();\n      var dd = today.getDate();\n      var mm = today.getMonth()+1  //January is 0!\n      var yyyy = today.getFullYear();\n      var hh =today.getHours();\n\n      var curr_time = yyyy*12*30*24*60 + mm*30*24*60 + dd*24*60 + hh*60;\n      return curr_time;\n\n\n    }\n    function check(curr_time,ts, months,days,hours){\n      var interval = months*30*24*60 + days*24*60 + hours*60;\n      var y = parseInt(ts[0] + ts[1] + ts[2] + ts[3]);\n      var m = parseInt(ts[4] + ts[5]);\n      var d = parseInt(ts[6] + ts[7]);\n      var h= parseInt(ts[9] + ts[10]);\n      var min = parseInt(ts[11]+ ts[12]);\n\n      var lt = y*12*30*24*60 + m*30*24*60 + d*24*60 + h*60 + min;\n\n      if(curr_time-lt > interval)\n      {\n        return 0;\n      }\n      else\n      {\n        return 1;\n      }\n\n\n    }\n    function filter_data(sum,ts, months,days,hours) {\n\n      var total_minutes  = months*30*24*60 + days*24*60 + hours*60;\n      var today = new Date();\n      var dd = today.getDate();\n      var mm = today.getMonth()+1  //January is 0!\n      var yyyy = today.getFullYear();\n      var hh =today.getHours();\n\n\n      var y = parseInt(ts[0] + ts[1] + ts[2] + ts[3]);\n      var m = parseInt(ts[4] + ts[5]);\n      var d = parseInt(ts[6] + ts[7]);\n      var h= parseInt(ts[9] + ts[10]);\n      var min = parseInt(ts[11]+ ts[12]);\n\n      yyyy-=y;\n      mm-=m;\n      dd-=d;\n      hh-=h;\n\n      var minutes_passed = yyyy*12*30*24*60 + mm*30*24*60 + dd*24*60 + hh*60;\n\n      // console.log(total_minutes,minutes_passed)\n      if(minutes_passed < total_minutes)\n      {\n        let ret = String(d) + \"/\" + String(m) + \"/\" + String(y) + \" \" + String(h) + \":\" +String(min);\n        return ret;\n      }\n      else{\n        return \"-1\";\n      }\n    }\n\n    axios.get('http://localhost:4000/testy', {\n    })\n      .then(res => {\n        let data2 = [];\n        let array = res.data[\"m2m:cnt\"][\"m2m:cin\"];\n\n        console.log(\"this\",array);\n        let sum = 0;\n        let curr_time = calc();\n        let grapharray = [];\n        let velocity_of_water = 5; //litres per minute\n        let interva = 1 // minutes\n        for (let i = array.length-1; i > 0; i--) {\n          let data = array[i].con;\n          data = data.split(';');\n          let hboi = hash(data[0] + data[1], 23);\n          let lvl = 0;\n          lvl = parseInt(Number(\"0x\" + data[0]), 10);\n\n          let ts = array[i].ct;\n          let timev;\n          if(this.state.duration == \"1\")\n          {\n            let flag = check(curr_time,ts, parseInt(this.state.textFieldValue),0,0);\n            if(flag == 0)\n            {\n              let timec = gettim(ts);\n              grapharray.push({name: sum, uv: timec }); // push the time also \n              sum = 0;\n              curr_time -= interval(parseInt(this.state.textFieldValue),0,0);\n            }\n            let status_i = 0; // off\n            let status_i_minus_1 = 1; // on\n  \n            if(status_i & status_i_minus_1)\n            {\n              sum+= velocity_of_water*interva;\n            }\n            else if(status_i ^ status_i_minus_1)\n            {\n              sum+= (velocity_of_water*interva)/2;\n            }\n          }\n          else if(this.state.duration == \"2\")\n          {\n            let flag = check(curr_time,ts, 0,parseInt(this.state.textFieldValue),0);\n            if(flag == 0)\n            {\n              let timec = gettim(ts);\n              grapharray.push({name: sum, uv: timec }); // push the time also \n              sum = 0;\n              curr_time -= interval(0,parseInt(this.state.textFieldValue),0);\n            }\n            let status_i = 0; // off\n            let status_i_minus_1 = 1; // on\n  \n            if(status_i & status_i_minus_1)\n            {\n              sum+= velocity_of_water*interva;\n            }\n            else if(status_i ^ status_i_minus_1)\n            {\n              sum+= (velocity_of_water*interva)/2;\n            }\n          }\n          else\n          {\n            let flag = check(curr_time,ts, 0,0,parseInt(this.state.textFieldValue));\n            if(flag == 0)\n            {\n              let timec = gettim(ts);\n              grapharray.push({name: sum, uv: timec }); // push the time also \n              sum = 0;\n              curr_time -= interval(0,0,parseInt(this.state.textFieldValue));\n            }\n            let status_i = 0; // off\n            let status_i_minus_1 = 1; // on\n  \n            if(status_i & status_i_minus_1)\n            {\n              sum+= velocity_of_water*interva;\n            }\n            else if(status_i ^ status_i_minus_1)\n            {\n              sum+= (velocity_of_water*interva)/2;\n            }\n          }\n        }\n        this.data = data2;\n        this.setState({ data: data2 })\n      })\n      ;\n  }\n\n  componentDidMount(){\n    this.setState({textFieldValue: \"\"});\n  }\n\n  handleTextFieldChange = (event) => {\n    //  console.log(\"sort button\", this.state.sortValue)\n    // console.log(eve)\n    this.setState({\n        textFieldValue: event.target.value\n    })\n    }\n  handleSortJobs = (event) => {\n    //  console.log(\"sort button\", this.state.sortValue)\n    this.setState({\n        duration: event.target.value\n    })\n    }\n\n  render() {\n    // console.log(this.state.duration, this.state.textFieldValue)\n    return (\n      <div>\n        <Paper style={headerStyles}>\n        Water Comsumption over selected time intervals\n        </Paper>\n        <Paper style={styles}>\n        <select name=\"sortValue\" onChange={this.handleSortJobs}>\n                        <option value=\"2\">Days</option>\n                        <option value=\"1\">Months</option>\n                        <option value=\"3\">Hours</option>\n        </select>\n        </Paper>\n        <Paper style={styles}>\n          <TextField margin=\"dense\" label=\"1\" size=\"small\" value={this.state.textFieldValue} onChange={this.handleTextFieldChange} />\n        </Paper>\n        <Paper style={styles}>\n          <LineChart width={600} height={300} data={lmao}>\n            <Line type=\"monotone\" dataKey=\"uv\" stroke=\"#8884d8\" />\n            <CartesianGrid stroke=\"#ccc\" />\n            <XAxis dataKey=\"name\" />\n            <YAxis />\n          </LineChart>\n        </Paper>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}