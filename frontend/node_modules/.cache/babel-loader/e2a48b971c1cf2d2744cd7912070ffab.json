{"ast":null,"code":"var _jsxFileName = \"/home/kevin/Downloads/ESW/water-level-monitor/frontend/src/components/Users/Profile.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport SkillItem from './Items/SkillItem';\nimport EduItem from './Items/EduItem'; // import UserProfile from '../Common/test';\n\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSubmit = e => {\n      e.preventDefault(); // console.log(\"hi\");\n\n      console.log(this.state.newSkill);\n      const Sending = {\n        email: this.email,\n        newskill: this.state.newSkill\n      };\n      var inclusioncheck = false;\n      this.notes.map(ele => {\n        if (ele.toLowerCase() == this.state.newSkill.toLowerCase()) inclusioncheck = true;\n      }); //console.log(this.notes)\n\n      if (!inclusioncheck) {\n        axios.put(\"http://localhost:4000/user/addskill\", Sending).then(res => {// console.log(res);\n          //    this.user=res.data;\n          //    // this.setState({notes: res.data.skills});\n          //    this.notes = res.data.skills;\n          //   // console.log(this.user.name);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      } else {\n        alert(\"This Skill Has Already Been Added\");\n      }\n\n      window.location.reload(true);\n      this.state.newSkill = '';\n    };\n\n    this.eduSubmit = e => {\n      e.preventDefault(); // console.log(\"hi\");\n\n      var check = /^\\d{4}$/.test(this.state.newStart);\n\n      if (check && /[a-zA-Z]/.test(this.state.newEdu)) {\n        if (this.state.newEnd && (!/^\\d{4}$/.test(this.state.newEnd) || parseInt(this.state.newEnd) < parseInt(this.state.newStart))) {\n          alert(\"Please follow the mentioned format\");\n        } else {\n          const Sending = {\n            email: this.email,\n            institute: this.state.newEdu,\n            start: parseInt(this.state.newStart),\n            end: parseInt(this.state.newEnd)\n          };\n          axios.put(\"http://localhost:4000/user/addeducation\", Sending).then(res => {// console.log(res);\n            //    this.user=res.data;\n            //    // this.setState({notes: res.data.skills});\n            //    this.notes = res.data.skills;\n            //   // console.log(this.user.name);\n          }).catch(function (error) {\n            console.log(error);\n          });\n        }\n      } else {\n        alert(\"Please follow the mentioned format\");\n      }\n\n      window.location.reload(true);\n      this.state.newSkill = '';\n    };\n\n    this.state = {\n      users: [],\n      sortName: true,\n      newSkill: '',\n      newEdu: '',\n      newStart: '',\n      newEnd: '',\n      isLoading: true\n    };\n    this.onAddSkill = this.onAddSkill.bind(this);\n    this.onAddEdu = this.onAddEdu.bind(this);\n    this.onAddStart = this.onAddStart.bind(this);\n    this.onAddEnd = this.onAddEnd.bind(this);\n    this.sortClicked = this.sortClicked.bind(this);\n    this.renderIcon = this.renderIcon.bind(this);\n    this.sortChange = this.sortChange.bind(this);\n    this.email = '';\n    this.user = '';\n    this.notes = ['***'];\n    this.edus = [{}];\n  }\n\n  onAddSkill(event) {\n    this.setState({\n      newSkill: event.target.value\n    }); // console.log(this.state.newSkill);\n  }\n\n  onAddEdu(event) {\n    this.setState({\n      newEdu: event.target.value\n    }); // console.log(this.state.newEdu);\n  }\n\n  onAddStart(event) {\n    this.setState({\n      newStart: event.target.value\n    });\n  }\n\n  onAddEnd(event) {\n    this.setState({\n      newEnd: event.target.value\n    });\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:4000/user').then(response => {\n      this.setState({\n        users: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    console.log(this.state.users);\n    axios.get(\"http://localhost:4000/user/session\").then(res => {\n      // console.log(res);\n      // console.log(res.data[0].email);\n      this.email = res.data[0].email; //console.log(this.email);\n\n      const Sending = {\n        email: this.email\n      };\n      console.log(Sending);\n      axios.post(\"http://localhost:4000/user/findone\", Sending).then(res => {\n        // console.log(res);\n        this.user = res.data; // this.setState({notes: res.data.skills});\n\n        this.notes = res.data.skills;\n        this.edus = res.data.education;\n        console.log(this.user);\n        this.setState({\n          isLoading: false\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  } // componentDidUpdate() {\n  //     axios.get('http://localhost:4000/user')\n  //          .then(response => {\n  //              this.setState({users: response.data});\n  //          })\n  //          .catch(function(error) {\n  //              console.log(error);\n  //          })        \n  // }\n\n\n  sortClicked() {\n    console.log(this.state);\n  }\n\n  sortChange() {\n    var array = this.state.users;\n    var flag = this.state.sortName;\n    array.sort(function (a, b) {\n      if (a.date != undefined && b.date != undefined) {\n        return (1 - flag * 2) * (new Date(a.date) - new Date(b.date));\n      } else {\n        return 1;\n      }\n    }); // Sort youngest first\n\n    this.setState({\n      users: array,\n      sortName: !this.state.sortName\n    });\n  }\n\n  renderIcon() {\n    if (this.state.sortName) {\n      return React.createElement(ArrowDownwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(ArrowUpwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      });\n    }\n  }\n\n  render() {\n    // console.log(UserProfile.getName());\n    console.log(this.user);\n    const SkillItems = this.notes.map(item => React.createElement(SkillItem, {\n      key: item,\n      item: item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }));\n    const EduItems = this.edus.map(item => React.createElement(EduItem, {\n      key: item,\n      item: item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }));\n\n    if (this.isLoading) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, \"Loading...\");\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        md: 12,\n        lg: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"Welcome To Your Profile \", this.user.name), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }), React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"Your Email Id: \", this.email), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }), React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"Current Rating: \", this.user.rating / this.user.no_of_raters, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), \"No. of Ratings: \", this.user.no_of_raters), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }), React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"Your Skills\")), SkillItems, React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \"Add new skill: \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.newSkill,\n        onChange: this.onAddSkill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Add\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }))), React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"Eduction Details\")), EduItems, React.createElement(\"form\", {\n        onSubmit: this.eduSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"edu-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, \"Add more education details: \"), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Institute (required)\",\n        className: \"form-control\",\n        value: this.state.newEdu,\n        onChange: this.onAddEdu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"edu-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Start Year:YYYY (required)\",\n        value: this.state.newStart,\n        onChange: this.onAddStart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"edu-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"End Year:YYYY (optional and greater than start year)\",\n        value: this.state.newEnd,\n        onChange: this.onAddEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"edu-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Add\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      })))));\n    }\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/home/kevin/Downloads/ESW/water-level-monitor/frontend/src/components/Users/Profile.js"],"names":["React","Component","axios","Paper","Grid","TableCell","TableHead","TableRow","Table","TableBody","Button","Typography","Slider","SkillItem","EduItem","ArrowUpwardIcon","ArrowDownwardIcon","Profile","constructor","props","onSubmit","e","preventDefault","console","log","state","newSkill","Sending","email","newskill","inclusioncheck","notes","map","ele","toLowerCase","put","then","res","catch","error","alert","window","location","reload","eduSubmit","check","test","newStart","newEdu","newEnd","parseInt","institute","start","end","users","sortName","isLoading","onAddSkill","bind","onAddEdu","onAddStart","onAddEnd","sortClicked","renderIcon","sortChange","user","edus","event","setState","target","value","componentDidMount","get","response","data","post","skills","education","array","flag","sort","a","b","date","undefined","Date","render","SkillItems","item","EduItems","name","rating","no_of_raters"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport SkillItem from './Items/SkillItem'\r\nimport EduItem from './Items/EduItem'\r\n// import UserProfile from '../Common/test';\r\n\r\n\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\n\r\nclass Profile extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            sortName:true, \r\n            newSkill:'',\r\n            newEdu:'',\r\n            newStart:'',\r\n            newEnd:'',\r\n            isLoading: true\r\n        };\r\n        this.onAddSkill = this.onAddSkill.bind(this);\r\n        this.onAddEdu = this.onAddEdu.bind(this);\r\n        this.onAddStart = this.onAddStart.bind(this);\r\n        this.onAddEnd = this.onAddEnd.bind(this);\r\n        this.sortClicked = this.sortClicked.bind(this);\r\n        this.renderIcon = this.renderIcon.bind(this);\r\n        this.sortChange = this.sortChange.bind(this);\r\n        this.email = '';\r\n        this.user = '';\r\n        this.notes = ['***'];\r\n        this.edus = [{}];\r\n    }\r\n\r\n    onAddSkill(event){\r\n        this.setState({newSkill: event.target.value});\r\n        // console.log(this.state.newSkill);\r\n    }\r\n    onAddEdu(event){\r\n        this.setState({newEdu: event.target.value});\r\n        // console.log(this.state.newEdu);\r\n    }\r\n    onAddStart(event){\r\n        this.setState({newStart: event.target.value});\r\n    }\r\n    onAddEnd(event){\r\n        this.setState({newEnd: event.target.value});\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('http://localhost:4000/user')\r\n             .then(response => {\r\n                 this.setState({users: response.data});\r\n             })\r\n             .catch(function(error) {\r\n                 console.log(error);\r\n             })\r\n        \r\n        console.log(this.state.users);\r\n        axios.get(\"http://localhost:4000/user/session\")\r\n             .then(res => {\r\n                    // console.log(res);\r\n                    // console.log(res.data[0].email);\r\n                    this.email = res.data[0].email;\r\n                    //console.log(this.email);\r\n                    const Sending={\r\n                        email: this.email\r\n                    }\r\n                    console.log(Sending);\r\n                    axios.post(\"http://localhost:4000/user/findone\",Sending)\r\n                         .then(res => {\r\n                                // console.log(res);\r\n                                this.user=res.data;\r\n                                // this.setState({notes: res.data.skills});\r\n                                this.notes = res.data.skills;\r\n                                this.edus = res.data.education;\r\n                               console.log(this.user);\r\n                               this.setState({isLoading: false});\r\n                         })\r\n                         .catch(function(error) {\r\n                             console.log(error);\r\n                         })\r\n             })\r\n             .catch(function(error) {\r\n                 console.log(error);\r\n             })\r\n             \r\n        \r\n    }\r\n\r\n    // componentDidUpdate() {\r\n    //     axios.get('http://localhost:4000/user')\r\n    //          .then(response => {\r\n    //              this.setState({users: response.data});\r\n    //          })\r\n    //          .catch(function(error) {\r\n    //              console.log(error);\r\n    //          })        \r\n    // }\r\n\r\n    sortClicked(){\r\n        console.log(this.state);\r\n    }\r\n\r\n    sortChange(){\r\n        var array = this.state.users;\r\n        var flag = this.state.sortName;\r\n        array.sort(function(a, b) {\r\n            if(a.date != undefined && b.date != undefined){\r\n                return (1 - flag*2) * (new Date(a.date) - new Date(b.date));\r\n            }\r\n            else{\r\n                return 1;\r\n            }\r\n          }); // Sort youngest first\r\n        this.setState({\r\n            users:array,\r\n            sortName:!this.state.sortName,\r\n        })\r\n    }\r\n\r\n    renderIcon(){\r\n        if(this.state.sortName){\r\n            return(\r\n                <ArrowDownwardIcon/>\r\n            )\r\n        }\r\n        else{\r\n            return(\r\n                <ArrowUpwardIcon/>\r\n            )            \r\n        }\r\n    }\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        // console.log(\"hi\");\r\n        console.log(this.state.newSkill);\r\n        const Sending ={\r\n            email:this.email,\r\n            newskill: this.state.newSkill\r\n        }\r\n\r\n        var inclusioncheck=false\r\n        this.notes.map( ele =>{\r\n            if(ele.toLowerCase() == this.state.newSkill.toLowerCase())\r\n                inclusioncheck=true;\r\n        })\r\n       //console.log(this.notes)\r\n        if(!inclusioncheck)\r\n        {\r\n            axios.put(\"http://localhost:4000/user/addskill\",Sending)\r\n            .then(res => {\r\n                // console.log(res);\r\n                //    this.user=res.data;\r\n                //    // this.setState({notes: res.data.skills});\r\n                //    this.notes = res.data.skills;\r\n                //   // console.log(this.user.name);\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            })        \r\n        }\r\n        else\r\n        {\r\n            alert(\"This Skill Has Already Been Added\");\r\n        }\r\n        window.location.reload(true);\r\n        this.state.newSkill = '';\r\n    }\r\n\r\n    eduSubmit = (e) => {\r\n        e.preventDefault();\r\n        // console.log(\"hi\");\r\n        var check = /^\\d{4}$/.test(this.state.newStart);\r\n        if(check && /[a-zA-Z]/.test(this.state.newEdu))\r\n        {\r\n            if(this.state.newEnd && (!/^\\d{4}$/.test(this.state.newEnd)|| parseInt(this.state.newEnd)<parseInt(this.state.newStart)))\r\n            {\r\n                alert(\"Please follow the mentioned format\");\r\n            }\r\n            else{\r\n            const Sending={\r\n                email: this.email,\r\n                institute: this.state.newEdu,\r\n                start: parseInt(this.state.newStart),\r\n                end: parseInt(this.state.newEnd)\r\n            }\r\n            axios.put(\"http://localhost:4000/user/addeducation\",Sending)\r\n            .then(res => {\r\n                // console.log(res);\r\n                //    this.user=res.data;\r\n                //    // this.setState({notes: res.data.skills});\r\n                //    this.notes = res.data.skills;\r\n                //   // console.log(this.user.name);\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            })  \r\n            }      \r\n        }\r\n        else\r\n        {\r\n            alert(\"Please follow the mentioned format\");\r\n        }\r\n        window.location.reload(true);\r\n        this.state.newSkill = '';\r\n    }\r\n\r\n    render() {\r\n        // console.log(UserProfile.getName());\r\n        console.log(this.user);\r\n        const SkillItems = this.notes.map(item => <SkillItem key={item} item={item}/>) \r\n        const EduItems = this.edus.map(item => <EduItem key={item} item={item}/>) \r\n        if(this.isLoading){\r\n            return(\r\n                <div>\r\n                    Loading...\r\n                </div>\r\n            )\r\n        }\r\n        else{\r\n            return (\r\n                <div>\r\n                    <Grid item xs={12} md={12} lg={12}>\r\n                        <Paper>\r\n                            Welcome To Your Profile {this.user.name} \r\n                        </Paper>   \r\n                        <br/>\r\n                        <br/>\r\n                        <Paper>\r\n                            Your Email Id: {this.email}  \r\n                        </Paper>  \r\n                        <br/>                    \r\n                        <Paper>\r\n                            Current Rating: {this.user.rating/this.user.no_of_raters}\r\n                            <br/>\r\n                            No. of Ratings: {this.user.no_of_raters}\r\n                        </Paper>  \r\n                        <br/>\r\n                        <Paper>\r\n                            <h5>Your Skills</h5>\r\n                        </Paper>\r\n                        {/* <br/> */}\r\n                        {SkillItems}\r\n                        \r\n                        <form onSubmit={this.onSubmit}>\r\n                            <div className=\"form-group\">\r\n                                <label>Add new skill: </label>\r\n                                <input type=\"text\" \r\n                                    className=\"form-control\"\r\n                                    value={this.state.newSkill}\r\n                                onChange={this.onAddSkill}\r\n                                    />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input type=\"submit\" value=\"Add\" className=\"btn btn-primary\"/>\r\n                            </div>\r\n                        </form>  \r\n\r\n                        <Paper>\r\n                            <h5>Eduction Details</h5>\r\n                        </Paper>\r\n                        {/* <br/> */}\r\n                        {EduItems}\r\n                        \r\n                        <form onSubmit={this.eduSubmit}>\r\n                            <div className=\"edu-group\">\r\n                                <label>Add more education details: </label>\r\n                                <input type=\"text\"\r\n                                    placeholder=\"Institute (required)\"\r\n                                    className=\"form-control\"\r\n                                    value={this.state.newEdu}\r\n                                onChange={this.onAddEdu}\r\n                                    />\r\n                            </div>\r\n                            <div className=\"edu-group\">\r\n                                <input type=\"text\" \r\n                                    className=\"form-control\"\r\n                                    placeholder=\"Start Year:YYYY (required)\"\r\n                                    value={this.state.newStart}\r\n                                onChange={this.onAddStart}\r\n                                    />\r\n                            </div>\r\n                            <div className=\"edu-group\">\r\n                                <input type=\"text\" \r\n                                    className=\"form-control\"\r\n                                    placeholder=\"End Year:YYYY (optional and greater than start year)\"\r\n                                    value={this.state.newEnd}\r\n                                onChange={this.onAddEnd}\r\n                                    />\r\n                            </div>\r\n                            <div className=\"edu-group\">\r\n                                <input type=\"submit\" value=\"Add\" className=\"btn btn-primary\"/>\r\n                            </div>\r\n                        </form>           \r\n                    </Grid>                \r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}